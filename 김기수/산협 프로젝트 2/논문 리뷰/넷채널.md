define 라이브러리 패쓰 값
노드 두개에서 해야함
재훈이형걸로 같이 써야할 듯.
드라이버를 업데이트
grub을 잘 사용해야함.
Toy experient 먼저 해보고
잘 되면 확인할 것
패킷 캡쳐 - Tshark
Flamegraph 그리기
reordering - channel에서 어떻게 되는지. -> 코드 상으로
ebpf, 혹은 모듈로 가능한지?
20Gbps 왜???? ???? iperf3

update-grub


=========== 고정 아이피 날라갔을 때 대처법 =================
ens4f0np0
sudo lshw -c net
/etc/netplan/~~~~ ->고정IP 지정해주는 것.
sudo netplan apply
파이썬은 3.8을 쓸 것.
![[Pasted image 20241113170734.png]]
gtp

![[Pasted image 20241113170745.png]]white

tc qdisc에 관하여 -> 트래픽 컨트롤로, loss 를 시뮬레이션 하는 등의 기능이 있다. 
sudo tc qdisc add dev $iface root mq
이 network_setup.sh를 두번 실행해서 Error: Exclusivity flag on, cannot modify.가 떴으니 해당 policy를 삭제해주면 된다. 안해도 일단 작동은 한다.

![[Pasted image 20241113181648.png]]




![[Pasted image 20241113182752.png]]

![[Pasted image 20241113183209.png]]

![[Pasted image 20241113184015.png]]
디버깅 일지
11/18
tcpping으로 하면 30.93Gbps가 나오긴 한다.
다시한번 더 하니 31.37Gbps가 나온다
dmesg로 찍어보니 ndping을 하였을 떄 커널에서 문제가 생긴 것으로 파악 된다.
![[Pasted image 20241118154105.png]]

nd_host.c 342라인은 내가 추가한 Null test code 부분이다. 
![[Pasted image 20241118154717.png]]
이 테스트가 없을 때 `NULL pointer Exception`이 안뜨는 것으로 보아 `req->queue`가 null인테 참조하느라 커널에서 exception이 뜨고 Killed 되는 것으로 보인다.
근데 그 뒤에 null일 때 처리하는 코드가 있어서 헛다리를 짚은 것으로 보인다.
hash table initialization이 잘못 되었거나 hash iterator가 문제이거나.

실제로 비어있는 것은 `nsk->nd_ctrl`이다. nsk 도 찍어보니 얘는 정상적으로 할당 되어 있었다.



nd_conn_init_module -> nd_conn_create_ctrl -> hash_add

